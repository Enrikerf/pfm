\subsubsection{Trabajos previos}
Esta sección documenta los resultados obtenidos de las investigaciones propuestas como objetivo en este trabajo.
Se ha consultado documentación y trabajos relacionados dentro del ámbito académico que respondan a: la adecuación de Go como lenguaje para el desarrollo de sistemas como el propuesto y
el uso del protocolo de comunicación.

\paragraph{Estudio justificativo del uso de Golang}

\input{./part/Proyecto_ejecutivo/memoria_constructiva/golang/golang}

\paragraph{Estudio justificativo del uso de RPC}
\input{part/Proyecto_ejecutivo/memoria_constructiva/rpc/rpc_vs_rest}

\subsubsection{Infraestructura}\label{subsubsec:infraestructura}

En sección documenta el diseño realizado con respecto a la infraestructura a utilizar.
En la parte del hardware se detallará el diseño de los elementos seleccionados para implementar el control en velocidad del motor de corriente continua.
Se documenta la elección de las plataformas utilizadas para albergar los programas diseñados en la memoria descriptiva.
El diseño de la base de datos y las herramientas de despliegue.

\paragraph{Docker}\label{par:Docker}
\input{part/Proyecto_ejecutivo/memoria_constructiva/docker/docker}

\paragraph{Raspberry}
\input{part/Proyecto_ejecutivo/memoria_constructiva/raspb/raspberry}

\paragraph{Motor CC y puente H}
\input{part/Proyecto_ejecutivo/memoria_constructiva/motor/motor}
\input{part/Proyecto_ejecutivo/memoria_constructiva/motor/ElectronicaPot}

\paragraph{Mysql}\label{par:mysql}

La base de datos será Mysql.
Es la solución más estándar y se dispone de conocimiento previo evitando añadir complejidad.
En la~\cref{fig:DBSchema} se dispone del diagrama de relaciones de la base de datos.
Esta base de datos permitirá persistir la información introducida por los usuarios en el sistema del programa Manager.\\

\begin{figure}[H]
    \centering
    \includegraphics[scale = 0.2]{part/Proyecto_ejecutivo/memoria_constructiva/dbSchema}
    \caption{Esquema de la base de datos}\label{fig:DBSchema}
\end{figure}

\paragraph{CI/CD}\label{par:cicd}

Para garantizar la correcta entrega del software en cada iteración se ejecutarán distintos scripts automáticos y se hará uso de un control de versiones.
El programa más extendido para el control de versiones de software es \textit{Git} y el servicio de almacenamiento en la nube de control de versiones \textit{Git} más extendido es \textit{Github}.
Github pone a disposición el servicio de \textit{Github Actions}.
Es un servicio de automatización de CI/CD que lanza los scripts configurados a lo largo del flujo de vida del código en el control de versiones.

En el~\cref{lst:githubActions} está la configuración de los \textit{Github Actions}.
Se ejecutarán scripts de verificación en los Pull Request y en el proceso final de unión de código nuevo a producción.
Los Pull Request son el proceso anterior a introducir código nuevo en producción.
Se realiza una petición de revisión a los colaboradores del repositorio antes de introducir dicho código.
En el mismo proceso de revisión antes de que los compañeros acepten dicha contribución pueden ver que se han ejecutado los scripts que garantizan que dicho código pasa todos los tests y siguen el estándar de estilo.
En el proceso de unión final se volverán a ejecutar los mismos.

\phantom{blank}
\vspace{10mm}
\hrule

\begin{lstlisting}[language=go,caption={githubActions.yml},breaklines=true,label={lst:githubActions}]
name: Go

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: 1.17

    - name: Build
      run: go build -v ./...

    - name: Test
      run: cd manager; go test -v ./...

    - name: Quality
      run: cd manager; ./sonarcloud
\end{lstlisting}

\hrule
